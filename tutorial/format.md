# 格式化消息

风车小镇支持一系列的文字格式化操作，从最常用的颜色代码，到复杂的渐变文字与悬浮文字系统，这些功能可以轻松地帮助您构建炫酷的聊天消息。

## 颜色代码和样式代码

让我们先从最简单的颜色代码开始，要构建彩色文字，只需要在聊天消息前面加上字符`&`和**颜色代码**，例如：在聊天框中输入 `&b这是一条消息` ，发送后在消息框中中将会渲染为 <span style="color: cyan;">这是一条消息</span>。

<spam id="code-graph">完整的颜色与代码之间的对应关系如下表所示：</spam>

| 颜色代码 | 颜色  | 标识符          | 显示效果                                        |
| ---- | --- | ------------ | ------------------------------------------- |
| &0   | 黑色  | black        | <span style="color: #000000;">这是一条消息</span> |
| &1   | 深蓝色 | dark_blue    | <span style="color: #0000AA;">这是一条消息</span> |
| &2   | 深绿色 | dark_green   | <span style="color: #00AA00;">这是一条消息</span> |
| &3   | 湖蓝色 | dark_aqua    | <span style="color: #00AAAA;">这是一条消息</span> |
| &4   | 深红色 | dark_red     | <span style="color: #AA0000;">这是一条消息</span> |
| &5   | 紫色  | dark_purple  | <span style="color: #AA00AA;">这是一条消息</span> |
| &6   | 金色  | gold         | <span style="color: #FFAA00;">这是一条消息</span> |
| &7   | 灰色  | gray         | <span style="color: #AAAAAA;">这是一条消息</span> |
| &8   | 深灰色 | dark_gray    | <span style="color: #555555;">这是一条消息</span> |
| &9   | 蓝色  | blue         | <span style="color: #5555ff;">这是一条消息</span> |
| &a   | 绿色  | green        | <span style="color: #55ff55;">这是一条消息</span> |
| &b   | 天蓝色 | aqua         | <span style="color: #55ffff;">这是一条消息</span> |
| &c   | 红色  | red          | <span style="color: #ff5555;">这是一条消息</span> |
| &d   | 粉红色 | light_purple | <span style="color: #ff55ff;">这是一条消息</span> |
| &e   | 黄色  | yellow       | <span style="color: #ffff55;">这是一条消息</span> |
| &f   | 白色  | white        | <span style="color: #ffffff;">这是一条消息</span> |

除了颜色外，您还可以通过样式代码控制消息的样式，例如：将文字加粗、添加下划线和重置消息样式等。样式代码同样以`&`开始，后面跟上对应的样式代码。

完整的代码和样式之间的关系如下表所示

| 样式代码 | 样式  | 标识符           | 参考效果              |
| ---- | --- | ------------- | ----------------- |
| &k   | 混淆  | obfuscated    | #8OINSA98Y        |
| &l   | 粗体  | bold          | **这是一条消息**        |
| &m   | 删除线 | strikethrough | <del>这是一条消息</del> |
| &n   | 下划线 | underlined    | <u>这是一条消息</u>     |
| &o   | 斜体  | italic        | <em>这是一条消息</em>   |
| &r   | 重置  | reset         | **这是一**条消息        |

> 您可以在服务器中使用命令`/colors`查看颜色和样式与代码之间的对应关系。

## 十六进制颜色

上一小节的颜色代码只能实现固定的颜色，如果您需要完整的色彩空间，则需要用到**十六进制颜色系统**。

> 十六进制颜色由红色、绿色和蓝色三种**颜色分量**混合而成，每一个颜色分量的最低值为`0`，最大值为`255`，可以通过两位十六进制数表示，将三种颜色分量的十六进制数按照顺序组合在一起，就表示了十六进制颜色，例如：`0000AA`是将`0`的红色、`0`的绿色和`170`的蓝色一起混合而成的颜色，即 <span style="color: blue">蓝色</span>。
> <br/>
> 您也可以使用三位数字表示的十六进制颜色，此时，从左向右的每一个数字分别表示红色、蓝色和绿色分量，`0`代表最低亮度，`F`代表最高亮度，中间的数值通过在两者之间进行插值得到，例如：`0FF`与`00FFFF`表示的是同一个颜色。

要在服务器中使用十六进制颜色，请首先在聊天框中输入`&#`，然后在其后附加十六进制颜色，例如：在聊天框中输入`&#00AAAA这是一条消息`，发送后将会渲染成 <span style="color: #00AAAA;">这是一条消息</span>。

> 您可以在服务器中使用命令`/colorpicker`打开选色板，并选择需要的十六进制颜色。

## 格式标签

**格式标签**是一项极为强大的格式化消息工具。通过格式标签，您不仅可以声明消息的颜色和样式，还可以实现复杂的控制功能，例如：设置消息的悬浮文字内容、设置点击文字执行的操作等。

**格式标签**采用**HTML标签**相似的设计思路，具备以下特征：

- 格式标签是由一对尖括号包围起来的元素，例如`<italic>`表示一个`italic`标签。
- 格式标签通常成对出现，例如`<italic></italic>`。
- 一对标签中先出现的为**开始标签**，后出现的是**结束标签**，结束标签使用`/`开头。
- 开始标签与结束标签中为标签的作用域，例如`<italic>标签内</italic>标签外`。

服务器会自动检测消息中的格式标签，并对标签进行格式渲染，在上文的例子中，`<italic>`是一个斜体标签，它会将标签内的内容渲染为斜体，因此，它的实际显示效果为：<em>标签内</em>标签外。

> 结束标签可以**缺省**，此时标签的作用域为从开始标签起始到消息末尾的所有内容，例如`<italic>这是一段消息`的渲染效果为：<em>这是一段消息</em>。

> 标签可以递归嵌套，例如`<italic><bold>这是一段消息</bold></italic>`表示：同时应用斜体与粗体文字效果，它的显示效果为<em><b>这是一段消息</b></em>。

### 标签参数

部分格式标签支持标签参数，以实现可变的格式效果，标签参数具备以下特征：

- 标签参数只出现在开始标签中
- 标签参数出现在标签类型的后面，并且使用一个冒号进行分割，如`<hover:参数></hover>`
- 部分标签支持多个参数，每个参数之间也使用冒号进行分割，如`<gradient:参数1:参数2></gradient>`

在上文的例子中，`<gradient>`是一个颜色渐变标签，它可以使标签内的文字发生渐变的颜色效果，第一个参数是起始的颜色，第二个参数是结束的颜色，如`<gradient:00AAAA:CC0000>这是一条消息</gradient>`会被渲染为：<spam style="background: linear-gradient(to right, #0000AA, #CC0000); -webkit-background-clip: text; color: transparent">这是一条消息</spam>。

### 标签类型

下表介绍了服务器支持的所有标签类型：



| 名称   | 标识符                            | 参数        | 功能                        |
| ---- | ------------------------------ | --------- | ------------------------- |
| 颜色   | `<color:%code%>`               | 十六进制颜色    | 设置文字的显示颜色                 |
| 悬浮文字 | `<hover:%text%>`               | 悬浮文字内容    | 鼠标移到消息上方时显示指定的悬浮文字        |
| 超链接  | `<url:%url%>`                  | 网站地址      | 鼠标点击文字后跳转到指定网站页面          |
| 粘贴   | `<clipboard:%text%>`           | 粘贴文字内容    | 鼠标点击文字后将指定内容复制到玩家的粘贴板中    |
| 内容提示 | `<suggest:%text%>`             | 提示内容      | 鼠标点击文字后将指定内容替换到玩家的消息输入框中  |
| 运行命令 | `<command:%command%>`          | 命令        | 鼠标点击文字后玩家将执行指定的命令         |
| 内容插入 | `<insertion: %text%>`          | 插入内容      | 鼠标点击文字后将指定内容插入到玩家的消息输入框中  |
| 彩虹   | `<rainbow>`                    |           | 添加彩虹的颜色渐变效果               |
| 渐变   | `<gradient:%color1%:%color2%>` | 起始颜色与结束颜色 | 添加渐变的颜色效果                 |
| 重置   | `<reset>`                      |           | 重置所有的消息格式，此标签单独使用，不具有结束标签 |



服务器也支持使用直接颜色名称与样式名称作为标签，如：`<red></red>`，`<italic></italic>`。有关完整的颜色名称与样式名称列表，请查阅本篇文档[第一节](#code-graph)中的表格。



> 部分消息标签可以用于引导玩家前往特定的网站或执行特定的命令，此类标签可能会被恶意玩家利用并造成较大的不良影响，此类标签可能会在某些场景下被禁止使用。


